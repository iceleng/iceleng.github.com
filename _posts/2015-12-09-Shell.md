##每分钟采集load和指定名称进程的资源消耗情况的脚本

  #!/bin/bash
  if [ $# -ne 1 ]
  then
    echo "param error"
    exit
  fi
  
  count=`ps aux | grep $1 | grep -v $0 | grep -v grep | wc -l`
  if [ $count -ne 1 ]
  then
    echo "count is :$count, name is $0"
    exit
  fi
  
  printf "[%s %s %s] " `date "+%Y-%m-%d %H:%M:%S %z"`
  printf " %s %s %s " `uptime | awk {'print $8,$9,$10'}`
  printf " %s" $1
  printf " %s %s %s %s %s\n" `ps aux | grep $1 | grep -v $0 | grep -v grep | awk {'print $3,$4,$5,$6,$10'}`

#crontab 的设置如下：
  */1 * * * * bash /home/iceleng/developerTools/logstash-2.1.0/bin/getProcInfo.sh elastic >> /home/iceleng/getProcInfo.log
