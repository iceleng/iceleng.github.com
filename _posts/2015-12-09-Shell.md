##每分钟采集load和指定名称进程的资源消耗情况的脚本

    #!/bin/bash
    if [ $# -ne 1 ]
    then
      echo "param error"
      exit
    fi
    
    count=`ps aux | grep $1 | grep -v $0 | grep -v grep | wc -l`
    if [ $count -ne 1 ]
    then
      echo "count is :$count, name is $0"
      exit
    fi
    
    printf "[%s %s %s] " `date "+%Y-%m-%d %H:%M:%S %z"`
    printf " %s %s %s " `uptime | awk {'print $8,$9,$10'}`
    printf " %s" $1
    printf " %s %s %s %s %s\n" `ps aux | grep $1 | grep -v $0 | grep -v grep | awk {'print $3,$4,$5,$6,$10'}`

#crontab 的设置如下：
    */1 * * * * bash /home/iceleng/developerTools/logstash-2.1.0/bin/getProcInfo.sh elastic >> /home/iceleng/getProcInfo.log


##logstash定义elasticSearch的模板
保存进 Elasticsearch
http://udn.yyuap.com/doc/logstash-best-practice-cn/get_start/full_config.html

##logstash 向elasticsearch写入数据，如何指定多个数据template
之前在配置从logstash写数据到elasticsearch时，指定单个数据模板没有问题，但是在配置多个数据模板时候，总是不成功，后来找了很多资料，终于找到解决办法，就是要多加一个配置项： template_name ，切该名字必须全部为小写。
参考配置信息：
    output {
            if [type] == "log_01" {
                    elasticsearch {
                            cluster => 'elasticsearch'
                            host =>         'x.x.x.x'
                            index => 'log_01-%{+YYYY-MM-dd}'
                            port => '9300'
                            workers => 1
                            template => "/data/logstash/conf/template_01.json"
                            template_name => "template_01.json"
                            template_overwrite => true
                    }
            }
            if [type] == "log_02" {
                elasticsearch {
                            cluster => 'elasticsearch'
                            host =>         'x.x.x.x'
                            index => 'log_02-%{+YYYY-MM-dd}'
                            port => '9300'
                            workers => 1
                            template => "/data/logstash/conf/template_02.json"
                            template_name => "template_01.json"
                          template_overwrite => true
                    }
            }
    }

